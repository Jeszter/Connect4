<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connect Four</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap">
    <link rel="stylesheet" href="/css/nextmenu.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<div class="bg-circles">
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</div>
<div class="connect4-pattern"></div>

<div class="game-status" id="game-status"></div>

<div class="game-container">
    <!-- Player 1 (left) -->
    <div class="player-info">
        <div class="player-name" th:text="${@connect4Controller.getPlayer1Name()}">Player 1</div>
        <div class="player-score" id="player1-score">0</div>
    </div>

    <!-- Game board (center) -->
    <div class="connect4-board" th:utext="${@connect4Controller.getHtmlField()}"></div>

    <!-- Player 2 (right) -->
    <div class="player-info">
        <div class="player-name" th:text="${@connect4Controller.getPlayer2Name()}">Player 2</div>
        <div class="player-score" id="player2-score">0</div>
    </div>
</div>

<!-- Main victory modal -->
<div class="modal" id="gameEndModal">
    <div class="modal-content">
        <h2 id="gameEndMessage">Congratulations!</h2>
        <p>What would you like to do next?</p>

        <button class="action-btn" onclick="location.href='connect4/menu'">Return to Menu</button>
        <button class="action-btn" onclick="showCommentForm()">Leave Feedback</button>
        <button class="action-btn" onclick="showRatingForm()">Rate the Game</button>
    </div>
</div>

<!-- Comment form modal -->
<div class="modal hidden" id="commentModal">
    <div class="modal-content">
        <h2>Leave Your Feedback</h2>
        <textarea id="commentText" placeholder="Share your experience..." rows="5" required></textarea>
        <br>
        <button class="action-btn" onclick="submitComment()">Submit Feedback</button>
        <button class="back-btn" onclick="backToMainModal()">Back to Options</button>
    </div>
</div>

<!-- Rating form modal -->
<div class="modal hidden" id="ratingModal">
    <div class="modal-content">
        <h2>Rate Your Experience</h2>
        <input type="hidden" id="ratingInput">
        <div class="rating-stars">
            <span class="rating-star" onclick="rateGame(1)">★</span>
            <span class="rating-star" onclick="rateGame(2)">★</span>
            <span class="rating-star" onclick="rateGame(3)">★</span>
            <span class="rating-star" onclick="rateGame(4)">★</span>
            <span class="rating-star" onclick="rateGame(5)">★</span>
        </div>
        <br>
        <button class="action-btn" onclick="submitRating()">Submit Rating</button>
        <button class="back-btn" type="button" onclick="backToMainModal()">Back to Options</button>
    </div>
</div>

<script src="/js/game.js" defer></script>
</body>
</html>